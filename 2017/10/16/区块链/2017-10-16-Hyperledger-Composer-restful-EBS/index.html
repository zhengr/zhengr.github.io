<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Hyperledger Composer REST Server为传统ERP系统打开区块链大门</title><meta name="description" content="观天之道，执天之行"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/highlight-theme-light.css"><script src="/jslib/highlight.pack.js"></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Robin's blog" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-space-between is-hidden-mobile"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Robin's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Hyperledger Composer REST Server为传统ERP系统打开区块链大门</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">点击返回顶部</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></aside></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">首页</a></h3><h3 class="is-inline-block"><a href="/about">关于</a></h3><h3 class="is-inline-block"><a href="/archives">归档</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2Hyperledger-Composer-REST-Server"><span class="toc-text">部署Hyperledger Composer REST Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95REST-server-%E8%B0%83%E7%94%A8"><span class="toc-text">测试REST server 调用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Curl"><span class="toc-text">Curl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Request-URL"><span class="toc-text">Request URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Body"><span class="toc-text">Response Body</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Code"><span class="toc-text">Response Code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Headers"><span class="toc-text">Response Headers</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Curl-1"><span class="toc-text">Curl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Request-URL-1"><span class="toc-text">Request URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Body-1"><span class="toc-text">Response Body</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Code-1"><span class="toc-text">Response Code</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response-Headers-1"><span class="toc-text">Response Headers</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Oracle-EBS-%E9%9B%86%E6%88%90%E6%80%9D%E8%B7%AF"><span class="toc-text">Oracle EBS 集成思路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Ref"><span class="toc-text">Ref</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Hyperledger"><i class="tag post-item-tag">Hyperledger</i></a><a href="/tags/Blockchain"><i class="tag post-item-tag">Blockchain</i></a><a href="/tags/Fabric"><i class="tag post-item-tag">Fabric</i></a><a href="/tags/Supplychain"><i class="tag post-item-tag">Supplychain</i></a><a href="/tags/RESTServer"><i class="tag post-item-tag">RESTServer</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Hyperledger Composer REST Server为传统ERP系统打开区块链大门</h1><time class="has-text-grey" datetime="2017-10-16T00:00:00.000Z">2017-10-16</time><article class="mt-2 post-content"><p>本文将带您了解Hyperledger Composer REST Server 如何为传统应用系统打开区块链大门，通过使用开放的service API，可以轻松与现有系统集成在一起。通过集成现有系统将允许您从现有的业务系统中提取数据，并将其转换为一个区块链业务网络中的资产或参与者。</p>
<h3 id="部署Hyperledger-Composer-REST-Server"><a href="#部署Hyperledger-Composer-REST-Server" class="headerlink" title="部署Hyperledger Composer REST Server"></a>部署Hyperledger Composer REST Server</h3><p>首先从github获得演示代码</p>
<pre><code class="bash">root@ubuntu:~# git clone https://github.com/zhengr/hyperledger-composer-sample-applications.git
Cloning into &#39;hyperledger-composer-sample-applications&#39;...
remote: Counting objects: 369, done.
remote: Compressing objects: 100% (300/300), done.
remote: Total 369 (delta 53), reused 365 (delta 51), pack-reused 0
Receiving objects: 100% (369/369), 30.86 MiB | 3.67 MiB/s, done.
Resolving deltas: 100% (53/53), done.
Checking connectivity... done.
Checking out files: 100% (304/304), done.
root@ubuntu:~#</code></pre>
<p>然后进入创建的目录hyperledger-composer-sample-applications</p>
<pre><code class="shell">root@ubuntu:~# cd hyperledger-composer-sample-applications
root@ubuntu:~/hyperledger-composer-sample-applications# ls
getTools.sh  info.js  lerna.json  LICENSE  package.json  packages  README.md  scripts
root@ubuntu:~/hyperledger-composer-sample-applications#</code></pre>
<p>执行以下操作</p>
<pre><code>npm install
node info.js</code></pre>
<p>上述操作成功结束后，然后切换工作目录</p>
<pre><code class="shell">root@ubuntu:~/hyperledger-composer-sample-applications# ls
getTools.sh  info.js  lerna.json  LICENSE  package.json  packages  README.md  scripts
root@ubuntu:~/hyperledger-composer-sample-applications# cd packages
root@ubuntu:~/hyperledger-composer-sample-applications/packages# ls
digitalproperty-app  vehicle-lifecycle  vehicle-lifecycle-car-builder  vehicle-lifecycle-manufacturing  vehicle-lifecycle-vda
root@ubuntu:~/hyperledger-composer-sample-applications/packages# cd vehicle-lifecycle
root@ubuntu:~/hyperledger-composer-sample-applications/packages/vehicle-lifecycle# ls
build.sh  installers  package.json  README.md
root@ubuntu:~/hyperledger-composer-sample-applications/packages/vehicle-lifecycle#</code></pre>
<p>然后在 <code>vehicle-lifecycle</code> 目录里 执行 <code>./build.sh</code> ，这个命令将创建一个 <code>install.sh</code> 脚本文件（在目录installers/hlfv1 下）</p>
<p>在 <code>vehicle-lifecycle</code> 目录里继续执行 <code>cat installers/hlfv1/install.sh | bash</code> ，这个Shell脚本将自动部署数个Docker的容器。</p>
<blockquote>
<p>注意：这个脚本将删除已经运行的其他Docker容器。</p>
</blockquote>
<pre><code class="shell">CONTAINER ID        IMAGE                                                                                                                COMMAND                  CREATED             STATUS              PORTS                                            NAMES
9310728fb3b0        nodered/node-red-docker                                                                                              &quot;npm start -- --us...&quot;   2 days ago          Up 2 days           0.0.0.0:1880-&gt;1880/tcp                           node-red
eebdba5351f8        hyperledger/composer-rest-server:latest                                                                              &quot;pm2-docker compos...&quot;   2 days ago          Up 2 days           0.0.0.0:3000-&gt;3000/tcp                           rest
442c864462fe        dev-peer0.org1.example.com-org-acme-biznet-0.13.2-5987477a7f4960eb02b7387b832090d16530cadff98bad07039443836906c55f   &quot;chaincode -peer.a...&quot;   2 days ago          Up 2 days                                                            dev-peer0.org1.example.com-org-acme-biznet-0.13.2
ad9b38616b3b        hyperledger/composer-playground:latest                                                                               &quot;pm2-docker compos...&quot;   2 days ago          Up 2 days           0.0.0.0:8080-&gt;8080/tcp                           composer
1dfce8981c7e        hyperledger/fabric-peer:x86_64-1.0.1                                                                                 &quot;peer node start -...&quot;   2 days ago          Up 2 days           0.0.0.0:7051-&gt;7051/tcp, 0.0.0.0:7053-&gt;7053/tcp   peer0.org1.example.com
2d3e1e6a4b4b        hyperledger/fabric-orderer:x86_64-1.0.1                                                                              &quot;orderer&quot;                2 days ago          Up 2 days           0.0.0.0:7050-&gt;7050/tcp                           orderer.example.com
1d681fd8ce48        hyperledger/fabric-ca:x86_64-1.0.1                                                                                   &quot;sh -c &#39;fabric-ca-...&quot;   2 days ago          Up 2 days           0.0.0.0:7054-&gt;7054/tcp                           ca.org1.example.com
0dbd4d06783a        hyperledger/fabric-couchdb:x86_64-1.0.1                                                                              &quot;tini -- /docker-e...&quot;   2 days ago          Up 2 days           4369/tcp, 9100/tcp, 0.0.0.0:5984-&gt;5984/tcp       couchdb
root@ubuntu:~#</code></pre>
<p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171016Capture1.PNG" alt="20171016Capture1"></p>
<p>至此， Hyperledger Fabric， Hyperledger Composer &amp; REST server 都已正常运行。</p>
<h3 id="测试REST-server-调用"><a href="#测试REST-server-调用" class="headerlink" title="测试REST server 调用"></a>测试REST server 调用</h3><p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171016Capture2.PNG" alt="20171016Capture2"></p>
<p>通过调用车辆资产的POST API将创建一个车辆资产。测试Json数据如下：</p>
<pre><code class="json">&#123;
  &quot;$class&quot;: &quot;org.vda.Vehicle&quot;,
  &quot;vin&quot;: &quot;rz-vin:3066&quot;,
  &quot;vehicleDetails&quot;: &#123;
    &quot;$class&quot;: &quot;org.vda.VehicleDetails&quot;,
    &quot;make&quot;: &quot;Eu enim minim.&quot;,
    &quot;modelType&quot;: &quot;Veniam.&quot;,
    &quot;colour&quot;: &quot;Sint tempor.&quot;
  &#125;,
  &quot;vehicleStatus&quot;: &quot;ACTIVE&quot;
&#125;</code></pre>
<p>反馈结果如下：</p>
<h4 id="Curl"><a href="#Curl" class="headerlink" title="Curl"></a>Curl</h4><pre><code>curl -X POST --header &#39;Content-Type: application/json&#39; --header &#39;Accept: application/json&#39; -d &#39;&#123; \ 
   &quot;$class&quot;: &quot;org.vda.Vehicle&quot;, \ 
   &quot;vin&quot;: &quot;rz-vin:3066&quot;, \ 
   &quot;vehicleDetails&quot;: &#123; \ 
     &quot;$class&quot;: &quot;org.vda.VehicleDetails&quot;, \ 
     &quot;make&quot;: &quot;Eu enim minim.&quot;, \ 
     &quot;modelType&quot;: &quot;Veniam.&quot;, \ 
     &quot;colour&quot;: &quot;Sint tempor.&quot; \ 
   &#125;, \ 
   &quot;vehicleStatus&quot;: &quot;ACTIVE&quot; \ 
 &#125;&#39; &#39;http://192.168.1.185:3000/api/Vehicle&#39;</code></pre>
<h4 id="Request-URL"><a href="#Request-URL" class="headerlink" title="Request URL"></a>Request URL</h4><pre><code>http://192.168.1.185:3000/api/Vehicle</code></pre>
<h4 id="Response-Body"><a href="#Response-Body" class="headerlink" title="Response Body"></a>Response Body</h4><pre><code>&#123;
  &quot;$class&quot;: &quot;org.vda.Vehicle&quot;,
  &quot;vin&quot;: &quot;rz-vin:3066&quot;,
  &quot;vehicleDetails&quot;: &#123;
    &quot;$class&quot;: &quot;org.vda.VehicleDetails&quot;,
    &quot;make&quot;: &quot;Eu enim minim.&quot;,
    &quot;modelType&quot;: &quot;Veniam.&quot;,
    &quot;colour&quot;: &quot;Sint tempor.&quot;
  &#125;,
  &quot;vehicleStatus&quot;: &quot;ACTIVE&quot;
&#125;</code></pre>
<h4 id="Response-Code"><a href="#Response-Code" class="headerlink" title="Response Code"></a>Response Code</h4><pre><code>200</code></pre>
<h4 id="Response-Headers"><a href="#Response-Headers" class="headerlink" title="Response Headers"></a>Response Headers</h4><pre><code>&#123;
  &quot;date&quot;: &quot;Tue, 17 Oct 2017 18:06:23 GMT&quot;,
  &quot;x-content-type-options&quot;: &quot;nosniff&quot;,
  &quot;etag&quot;: &quot;W/\&quot;c4-c8BOihCzY1zK45OdZsPEX8+ZWX4\&quot;&quot;,
  &quot;x-download-options&quot;: &quot;noopen&quot;,
  &quot;x-frame-options&quot;: &quot;DENY&quot;,
  &quot;content-type&quot;: &quot;application/json; charset=utf-8&quot;,
  &quot;access-control-allow-origin&quot;: &quot;http://192.168.1.185:3000&quot;,
  &quot;access-control-allow-credentials&quot;: &quot;true&quot;,
  &quot;connection&quot;: &quot;keep-alive&quot;,
  &quot;vary&quot;: &quot;Origin, Accept-Encoding&quot;,
  &quot;content-length&quot;: &quot;196&quot;,
  &quot;x-xss-protection&quot;: &quot;1; mode=block&quot;
&#125;</code></pre>
<p>反馈调用成功。</p>
<p>再通过调用Vehicle的GET /Vehicle/{id} 来查询，可以看到该资产已经成功添加。</p>
<p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171016Capture3.PNG" alt="20171016Capture3"></p>
<h4 id="Curl-1"><a href="#Curl-1" class="headerlink" title="Curl"></a>Curl</h4><pre><code>curl -X GET --header &#39;Accept: application/json&#39; &#39;http://192.168.1.185:3000/api/Vehicle/rz-vin%3A3066&#39;</code></pre>
<h4 id="Request-URL-1"><a href="#Request-URL-1" class="headerlink" title="Request URL"></a>Request URL</h4><pre><code>http://192.168.1.185:3000/api/Vehicle/rz-vin%3A3066</code></pre>
<h4 id="Response-Body-1"><a href="#Response-Body-1" class="headerlink" title="Response Body"></a>Response Body</h4><pre><code>&#123;
  &quot;$class&quot;: &quot;org.vda.Vehicle&quot;,
  &quot;vin&quot;: &quot;rz-vin:3066&quot;,
  &quot;vehicleDetails&quot;: &#123;
    &quot;$class&quot;: &quot;org.vda.VehicleDetails&quot;,
    &quot;make&quot;: &quot;Eu enim minim.&quot;,
    &quot;modelType&quot;: &quot;Veniam.&quot;,
    &quot;colour&quot;: &quot;Sint tempor.&quot;
  &#125;,
  &quot;vehicleStatus&quot;: &quot;ACTIVE&quot;
&#125;</code></pre>
<h4 id="Response-Code-1"><a href="#Response-Code-1" class="headerlink" title="Response Code"></a>Response Code</h4><pre><code>200</code></pre>
<h4 id="Response-Headers-1"><a href="#Response-Headers-1" class="headerlink" title="Response Headers"></a>Response Headers</h4><pre><code>&#123;
  &quot;date&quot;: &quot;Wed, 18 Oct 2017 19:08:24 GMT&quot;,
  &quot;x-content-type-options&quot;: &quot;nosniff&quot;,
  &quot;etag&quot;: &quot;W/\&quot;c4-c8BOihCzY1zK45OdZsPEX8+ZWX4\&quot;&quot;,
  &quot;x-download-options&quot;: &quot;noopen&quot;,
  &quot;x-frame-options&quot;: &quot;DENY&quot;,
  &quot;content-type&quot;: &quot;application/json; charset=utf-8&quot;,
  &quot;access-control-allow-credentials&quot;: &quot;true&quot;,
  &quot;connection&quot;: &quot;keep-alive&quot;,
  &quot;vary&quot;: &quot;Origin, Accept-Encoding&quot;,
  &quot;content-length&quot;: &quot;196&quot;,
  &quot;x-xss-protection&quot;: &quot;1; mode=block&quot;
&#125;</code></pre>
<h3 id="Oracle-EBS-集成思路"><a href="#Oracle-EBS-集成思路" class="headerlink" title="Oracle EBS 集成思路"></a>Oracle EBS 集成思路</h3><p>假设实施Oracle EBS R12的公司是一个车辆制造企业，通过订阅Oracle EBS workflow的business event中的在制品完工事件 （racle.apps.wip.job.assembly.complete）， </p>
<p><img src="https://raw.githubusercontent.com/zhengr/zhengr.github.io/master/assets/images/20171016Capture4.PNG" alt="20171016Capture4"></p>
<p>当一辆新车在WIP中完工下线， 系统将会自动触发这个订阅， 推送编排好的数据消息到Hyperledger Composer 的REST server， 从而在Hyperledger Fabric区块链上新增了这个车辆资产。</p>
<p>同理， 如果Oracle EBS的SO模块完成了发运确认Ship Confirm，也通过相应的business event，这个资产就会在 Hyperledger Fabric 区块链上完成资产所有权的转移，所有的这些业务变化，都是在各个企业的共同参与的一个大的区块链上完成。</p>
<blockquote>
<p>这样一来， 传统的ERP系统通过区块链极大的实现了业务延展，ERP将不再是某个公司单一的内部业务系统，通过区块链，各个成员公司的SAP， Oracle， JDE， Sage等传统ERP将融合智能合约共同编排成一个更大的业务数据网。基于区块链技术，任何基于数字交易的活动成本和追踪成本都会降低，并且能提高安全性。</p>
<p>随着技术的进一步成熟，区块链势必将为企业的诚信经营保驾护航。</p>
</blockquote>
<h4 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h4><ul>
<li><a target="_blank" rel="noopener" href="http://awads.net/wp/2011/07/21/how-to-create-and-use-custom-business-events-in-oracle-e-business-suite/">如何使用Oracle EBS的Business Event</a> - How To Create and Use Custom Business Events in Oracle E-Business Suite</li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E18727_01/doc.121/e12905/T361836T361840.htm">Oracle EBS Business Event官方文档</a> - Managing Business Events </li>
</ul>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2017/10/29/AI/2018-01-01-KNIME-How-to-Connect-Database/" title="KNIME 连接主流数据库方法"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">上一页: KNIME 连接主流数据库方法</span></a><a class="button is-default" href="/2017/09/19/%E5%8C%BA%E5%9D%97%E9%93%BE/2017-09-19-HYPERLEDGER-SCM%20Finance/" title="区块链技术将盘活供应链金融Supply Chain Finance,两眼活棋的局面将要到来"><span class="has-text-weight-semibold">下一页: 区块链技术将盘活供应链金融Supply Chain Finance,两眼活棋的局面将要到来</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="zhengr/robin-zheng-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/zhengr"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><a title="rss" target="_blank" rel="noopener nofollow" href="/atom.xml"><i class="iconfont icon-rss"></i></a><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Robin 2025</span></p></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>